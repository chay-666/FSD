#include <stdio.h>

int main() {
    int m, r = 0, i, j;

    printf("Data bits: ");
    scanf("%d", &m);

    int d[m];
    for(i = 0; i < m; i++) scanf("%d", &d[i]);

    while((1 << r) < m + r + 1) r++;
    int n = m + r, h[n+1], k = 0;

    for(i = 1; i <= n; i++) h[i] = ((i & (i-1)) ? d[k++] : 0);

    for(i = 0; i < r; i++) {
        int p = 1 << i, x = 0;
        for(j = 1; j <= n; j++) if(j & p) x ^= h[j];
        h[p] = x;
    }

    printf("Code: ");
    for(i = n; i >= 1; i--) printf("%d", h[i]);

    int rcv[n+1];
    printf("\nRecv: ");
    for(i = n; i >= 1; i--) scanf("%d", &rcv[i]);

    int err = 0;
    for(i = 0; i < r; i++) {
        int p = 1 << i, x = 0;
        for(j = 1; j <= n; j++) if(j & p) x ^= rcv[j];
        if(x) err += p;
    }

    printf("Error at: %d\n", err);
    return 0;
}
